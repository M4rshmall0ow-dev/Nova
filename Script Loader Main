local Loader = {}
Loader.__index = Loader

local Services = {
    StarterGui = game:GetService("StarterGui"),
    Players = game:GetService("Players"),
    HttpService = game:GetService("HttpService"),
    TweenService = game:GetService("TweenService"),
    TextService = game:GetService("TextService")
}

Loader.Config = {
    DebugMode = true,
    NotificationDuration = 5,
    DiscordLink = "http://discord.gg/hubnova"
}

Loader.Games = {
    [126509999114328] = {
        Name = "99 Nights in Forest",
        Url = "https://api.luarmor.net/files/v4/loaders/bcdc1084ce2b1e4df151d04c7257d10b.lua",
        IsUpdating = true 
    },
    [131623223084840] = {
        Name = "Escape Tsunami For Brainrot!",
        Url = "https://api.luarmor.net/files/v4/loaders/9392c6336e05a60f4136ad06bfbd873a.lua"
    }
}

function Loader:Log(message, isError)
    if not self.Config.DebugMode then return end
    local prefix = isError and "[-] [ERROR]: " or "[+] [INFO]: "
    if isError then warn(prefix .. message) else print(prefix .. message) end
end

function Loader:ShowUpdateNotice()
    local container = (type(gethui) == "function") and gethui() or game:GetService("CoreGui")
    if container:FindFirstChild("AuroraUpdate") then container.AuroraUpdate:Destroy() end

    local AuroraGui = Instance.new("ScreenGui")
    AuroraGui.Name = "AuroraUpdate"
    AuroraGui.Parent = container

    -- Main Frame
    local MainFrame = Instance.new("Frame")
    MainFrame.Size = UDim2.new(0, 380, 0, 180)
    MainFrame.Position = UDim2.new(0.5, -190, 0.5, -90)
    MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 20)
    MainFrame.BorderSizePixel = 0
    MainFrame.Parent = AuroraGui

    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, 10)
    UICorner.Parent = MainFrame

    -- Aurora Gradient Glow (Stroke)
    local UIStroke = Instance.new("UIStroke")
    UIStroke.Color = Color3.fromRGB(0, 255, 255) -- Initial Cyan
    UIStroke.Thickness = 2.5
    UIStroke.Parent = MainFrame

    -- Text: Status
    local StatusText = Instance.new("TextLabel")
    StatusText.Size = UDim2.new(1, 0, 0, 50)
    StatusText.Position = UDim2.new(0, 0, 0, 20)
    StatusText.BackgroundTransparency = 1
    StatusText.Text = "Script is currently being updated!"
    StatusText.TextColor3 = Color3.fromRGB(255, 255, 255)
    StatusText.Font = Enum.Font.GothamBold
    StatusText.TextSize = 18
    StatusText.Parent = MainFrame

    -- Text: Discord Invite
    local DiscordText = Instance.new("TextLabel")
    DiscordText.Size = UDim2.new(1, 0, 0, 30)
    DiscordText.Position = UDim2.new(0, 0, 0, 70)
    DiscordText.BackgroundTransparency = 1
    DiscordText.Text = "Join our Discord for more updates!"
    DiscordText.TextColor3 = Color3.fromRGB(200, 200, 200)
    DiscordText.Font = Enum.Font.Gotham
    DiscordText.TextSize = 14
    DiscordText.Parent = MainFrame

    -- Copy Button
    local CopyBtn = Instance.new("TextButton")
    CopyBtn.Size = UDim2.new(0, 200, 0, 40)
    CopyBtn.Position = UDim2.new(0.5, -100, 0, 115)
    CopyBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
    CopyBtn.Text = "Copy Discord Link"
    CopyBtn.TextColor3 = Color3.fromRGB(0, 255, 255)
    CopyBtn.Font = Enum.Font.GothamMedium
    CopyBtn.TextSize = 14
    CopyBtn.Parent = MainFrame

    local BtnCorner = Instance.new("UICorner")
    BtnCorner.CornerRadius = UDim.new(0, 6)
    BtnCorner.Parent = CopyBtn

    local BtnStroke = Instance.new("UIStroke")
    BtnStroke.Color = Color3.fromRGB(0, 255, 255)
    BtnStroke.Transparency = 0.5
    BtnStroke.Parent = CopyBtn

    -- Aurora Animation (Color cycling)
    task.spawn(function()
        while AuroraGui.Parent do
            local tween = Services.TweenService:Create(UIStroke, TweenInfo.new(3, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {Color = Color3.fromRGB(170, 0, 255)})
            tween:Play()
            tween.Completed:Wait()
            local tween2 = Services.TweenService:Create(UIStroke, TweenInfo.new(3, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {Color = Color3.fromRGB(0, 255, 255)})
            tween2:Play()
            tween2.Completed:Wait()
        end
    end)

    -- Copy Logic
    CopyBtn.MouseButton1Click:Connect(function()
        if setclipboard then
            setclipboard(self.Config.DiscordLink)
            CopyBtn.Text = "Copied!"
            CopyBtn.TextColor3 = Color3.fromRGB(0, 255, 100)
            task.wait(2)
            CopyBtn.Text = "Copy Discord Link"
            CopyBtn.TextColor3 = Color3.fromRGB(0, 255, 255)
        else
            CopyBtn.Text = "Executor Not Supported"
        end
    end)
end

function Loader:ExecuteScript(gameData)
    if not gameData.Url or gameData.Url == "" then return end
    local success, content = pcall(function() return game:HttpGet(gameData.Url) end)
    if success then
        local func = loadstring(content)
        if func then task.spawn(func) end
    end
end

function Loader:Init()
    if not game:IsLoaded() then game.Loaded:Wait() end
    local detectedGame = self.Games[game.PlaceId]
    if detectedGame then
        if detectedGame.IsUpdating then
            self:ShowUpdateNotice()
        else
            self:ExecuteScript(detectedGame)
        end
    end
end

return Loader:Init()
